<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dactyloscopy</title>
    <link rel="stylesheet" href="/src/css/style.css">
</head>

<body>

    <div class="title">dactyloscopy.js</div>
    <div class="desc">//Browser FingerPrinting Methods</div>
    <a href="/src/js/dactyloscopy.js" download="dactyloscopy.js">Download <span id="file-size"></span></a>
    <div class="content">
        <ul>
            <li>Browser Fingerprint: <span id="id-browser"></span></li>
            <li>Canvas Fingerprint: <span id="id-canvas"></span></li>
        </ul>

    </div>


</body>

<script src="/src/js/dactyloscopy.js"></script>
<script>
    const client = new dactyloscopy()
    client.browserFingerprint().then(function(id) {
        document.getElementById('id-browser').innerHTML = id
    })

    document.getElementById('id-canvas').innerHTML = client.canvasFingerPrinting()
</script>

<script>
    function getFileSize(url) {
        var fileSize = '';
        var http = new XMLHttpRequest();
        http.open('HEAD', url, false); // false = Synchronous

        http.send(null); // it will stop here until this http request is complete

        // when we are here, we already have a response, b/c we used Synchronous XHR

        if (http.status === 200) {
            fileSize = http.getResponseHeader('content-length');
            console.log('fileSize = ' + fileSize);
        }

        return fileSize;
    }

    function formatSizeUnits(bytes) {
        if (bytes >= 1073741824) {
            bytes = (bytes / 1073741824).toFixed(2) + " GB";
        } else if (bytes >= 1048576) {
            bytes = (bytes / 1048576).toFixed(2) + " MB";
        } else if (bytes >= 1024) {
            bytes = (bytes / 1024).toFixed(2) + " KB";
        } else if (bytes > 1) {
            bytes = bytes + " bytes";
        } else if (bytes == 1) {
            bytes = bytes + " byte";
        } else {
            bytes = "0 bytes";
        }
        return bytes;
    }

    document.getElementById('file-size').innerHTML = '[' + formatSizeUnits(getFileSize('/src/js/dactyloscopy.js')) + ']'
</script>

</html>